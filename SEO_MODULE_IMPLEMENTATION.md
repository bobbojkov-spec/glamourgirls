# Complete SEO Module Implementation

## Overview
A comprehensive SEO management system for actress entries in the Next.js admin panel, featuring auto-generation, validation, and status tracking.

## Database Schema

### New Fields Added to `girls` Table:
- `seo_title` (VARCHAR 255) - SEO title (0-60 chars)
- `meta_description` (TEXT) - SEO description (0-160 chars)  
- `meta_keywords` (TEXT) - Comma-separated keywords
- `h1_title` (VARCHAR 255) - Required H1 headline
- `intro_text` (TEXT) - Introduction text (100-220 words)
- `og_title` (VARCHAR 255) - Open Graph title
- `og_description` (TEXT) - Open Graph description
- `og_image` (VARCHAR 500) - Open Graph image URL
- `canonical_url` (VARCHAR 500) - Canonical URL
- `seo_status` (ENUM: 'red' | 'yellow' | 'green') - SEO status indicator
- `auto_generated` (BOOLEAN) - Whether SEO was auto-generated
- `last_auto_generate` (DATETIME) - Last auto-generation timestamp

## Installation Steps

### 1. Run Database Migrations

```bash
cd gg26
mysql -u root -p glamourgirls < scripts/migrate-seo-schema-safe.sql
mysql -u root -p glamourgirls < scripts/add-seo-status-fields.sql
```

### 2. Update GirlForm Component

Replace the existing `SEOFormSection` import in `src/components/admin/girls/GirlForm.tsx`:

```typescript
import SEOFormSectionEnhanced from '@/components/admin/girls/SEOFormSectionEnhanced';
```

And update the component usage:

```typescript
<SEOFormSectionEnhanced
  actressId={initialData?.id || 0}
  actressData={{
    name: formData.name,
    firstName: formData.firstName,
    lastName: formData.lastName,
    era: formData.era?.toString() || '3',
    slug: formData.slug,
    galleryCount: formData.images?.length || 0,
  }}
  initialSEO={formData.seo}
/>
```

## API Endpoints

### GET `/api/admin/actress/[id]/seo`
Fetches SEO data for an actress.

**Response:**
```json
{
  "seoTitle": "...",
  "seoDescription": "...",
  "seoKeywords": "...",
  "h1Title": "...",
  "introText": "...",
  "ogTitle": "...",
  "ogDescription": "...",
  "ogImageUrl": "...",
  "canonicalUrl": "...",
  "seoStatus": "green",
  "autoGenerated": true,
  "lastAutoGenerate": "2024-01-01T00:00:00.000Z"
}
```

### POST `/api/admin/actress/[id]/seo`
Saves SEO data for an actress.

**Request Body:**
```json
{
  "seoTitle": "...",
  "seoDescription": "...",
  "seoKeywords": "...",
  "h1Title": "...",
  "introText": "...",
  "ogTitle": "...",
  "ogDescription": "...",
  "ogImageUrl": "...",
  "canonicalUrl": "..."
}
```

### POST `/api/admin/actress/[id]/seo/auto-generate`
Auto-generates SEO data based on actress information.

**Response:**
```json
{
  "success": true,
  "seoData": { ... },
  "message": "SEO data auto-generated successfully"
}
```

## SEO Scoring System

### RED Status
- Title < 30 chars
- Description < 120 chars
- Intro < 100 words
- H1 missing
- OG image missing

### YELLOW Status
- All required fields present BUT:
  - Title < 50 chars
  - Description < 150 chars
  - Intro < 160 words

### GREEN Status
- Title: 50-60 chars
- Description: 150-160 chars
- Intro: 180-220 words
- OG image present
- Canonical present
- No warnings

## Auto-Generation Data Sources

The auto-generation system uses:
1. **Actress name** - Primary identifier
2. **Career era** - From `godini` field (20s-30s, 40s, 50s, 60s)
3. **Gallery count** - Number of gallery images
4. **Timeline events** - Extracts movie titles and career highlights
5. **Existing meta text** - Refines if present
6. **Headshot/Gallery images** - For OG image

## Features

### Real-time Validation
- Character count indicators
- Word count for intro text
- Status color coding (red/yellow/green)
- Visual indicators (✓/⚠/✗)

### Auto-Generation
- One-click SEO generation
- Uses all available actress data
- Extracts movie titles from timeline
- Generates optimal-length content

### Manual Editing
- All fields are editable
- Real-time status updates
- Save button for persistence

## File Structure

```
gg26/
├── scripts/
│   ├── migrate-seo-schema-safe.sql
│   └── add-seo-status-fields.sql
├── src/
│   ├── lib/seo/
│   │   ├── generate-seo-enhanced.ts (Enhanced generation logic)
│   │   └── generate-seo.ts (Original - kept for compatibility)
│   ├── app/api/admin/actress/[id]/seo/
│   │   ├── route.ts (GET/POST endpoints)
│   │   └── auto-generate/route.ts (Auto-generation endpoint)
│   └── components/admin/girls/
│       ├── SEOFormSectionEnhanced.tsx (New enhanced component)
│       └── SEOFormSection.tsx (Original - can be replaced)
```

## Usage

1. **View SEO Status**: Open any actress edit page - SEO section shows current status
2. **Auto-Generate**: Click "Auto-Generate" button to create SEO data automatically
3. **Edit Manually**: Modify any field and see real-time validation
4. **Save**: Click "Save SEO" to persist changes

## Next Steps

1. Run database migrations
2. Update GirlForm to use SEOFormSectionEnhanced
3. Test auto-generation on a few actresses
4. Review and refine generated content as needed

